{"version":3,"sources":["../src/array-reduce-x.js"],"names":[],"mappings":"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","file":"array-reduce-x.esm.js","sourcesContent":["import attempt from 'attempt-x';\nimport splitIfBoxedBug from 'split-if-boxed-bug-x';\nimport toLength from 'to-length-x';\nimport toObject from 'to-object-x';\nimport assertIsFunction from 'assert-is-function-x';\nimport toBoolean from 'to-boolean-x';\nimport requireObjectCoercible from 'require-object-coercible-x';\nimport methodize from 'simple-methodize-x';\n\nconst natRed = [].reduce;\nconst nativeReduce = typeof natRed === 'function' && methodize(natRed);\n\nconst test1 = function test1() {\n  return attempt(function attemptee() {\n    return nativeReduce([], function iteratee(acc) {\n      return acc;\n    });\n  }).threw;\n};\n\nconst test2 = function test2() {\n  const res = attempt(function attemptee() {\n    return nativeReduce(\n      toObject('abc'),\n      function iteratee(acc, c) {\n        return acc + c;\n      },\n      'x',\n    );\n  });\n\n  return res.threw === false && res.value === 'xabc';\n};\n\nconst test3 = function test3() {\n  const res = attempt(function attemptee() {\n    const args = (function getArgs() {\n      /* eslint-disable-next-line prefer-rest-params */\n      return arguments;\n    })(1, 2, 3);\n\n    return nativeReduce(\n      args,\n      function iteratee(acc, arg) {\n        return acc + arg;\n      },\n      1,\n    );\n  });\n\n  return res.threw === false && res.value === 7;\n};\n\nconst test4 = function test4() {\n  const res = attempt(function attemptee() {\n    return nativeReduce(\n      {0: 1, 1: 2, 3: 3, 4: 4, length: 4},\n      function iteratee(acc, arg) {\n        return acc + arg;\n      },\n      2,\n    );\n  });\n\n  return res.threw === false && res.value === 8;\n};\n\nconst doc = typeof document !== 'undefined' && document;\n\nconst iteratee5 = function iteratee5(acc, node) {\n  acc[acc.length] = node;\n\n  return acc;\n};\n\nconst test5 = function test5() {\n  if (doc) {\n    const fragment = doc.createDocumentFragment();\n    const div = doc.createElement('div');\n    fragment.appendChild(div);\n\n    const res = attempt(function attemptee() {\n      return nativeReduce(fragment.childNodes, iteratee5, []);\n    });\n\n    return res.threw === false && res.value.length === 1 && res.value[0] === div;\n  }\n\n  return true;\n};\n\nconst test6 = function test6() {\n  const res = attempt(function attemptee() {\n    return nativeReduce('ab', function iteratee() {\n      /* eslint-disable-next-line prefer-rest-params */\n      return arguments[3];\n    });\n  });\n\n  return res.threw === false && typeof res.value === 'object';\n};\n\n// ES5 15.4.4.21\n// http://es5.github.com/#x15.4.4.21\n// https://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Objects/Array/reduce\nconst isWorking = toBoolean(nativeReduce) && test1() && test2() && test3() && test4() && test5() && test6();\n\nconst patchedReduce = function reduce(array, callBack /* , initialValue */) {\n  requireObjectCoercible(array);\n  assertIsFunction(callBack);\n\n  /* eslint-disable-next-line prefer-rest-params */\n  return arguments.length > 2 ? nativeReduce(array, callBack, arguments[2]) : nativeReduce(array, callBack);\n};\n\nexport const implementation = function reduce(array, callBack /* , initialValue */) {\n  const object = toObject(array);\n  // If no callback function or if callback is not a callable function\n  assertIsFunction(callBack);\n  const iterable = splitIfBoxedBug(object);\n  const length = toLength(iterable.length);\n  const argsLength = arguments.length;\n\n  // no value to return if no initial value and an empty array\n  if (length === 0 && argsLength < 3) {\n    throw new TypeError('Reduce of empty array with no initial value');\n  }\n\n  let i = 0;\n  let result;\n\n  if (argsLength > 2) {\n    /* eslint-disable-next-line prefer-rest-params,prefer-destructuring */\n    result = arguments[2];\n  } else {\n    do {\n      if (i in iterable) {\n        result = iterable[i];\n        i += 1;\n        break;\n      }\n\n      // if array contains no values, no initial value to return\n      i += 1;\n\n      if (i >= length) {\n        throw new TypeError('Reduce of empty array with no initial value');\n      }\n    } while (true); /* eslint-disable-line no-constant-condition */\n  }\n\n  while (i < length) {\n    if (i in iterable) {\n      result = callBack(result, iterable[i], i, object);\n    }\n\n    i += 1;\n  }\n\n  return result;\n};\n\n/*\n * This method applies a function against an accumulator and each element in the\n * array (from left to right) to reduce it to a single value.\n *\n * @param {Array} array - The array to iterate over.\n * @param {Function} callBack - Function to execute for each element.\n * @param {*} [initialValue] - Value to use as the first argument to the first\n *  call of the callback. If no initial value is supplied, the first element in\n *  the array will be used. Calling reduce on an empty array without an initial\n *  value is an error.\n * @throws {TypeError} If array is null or undefined.\n * @throws {TypeError} If callBack is not a function.\n * @throws {TypeError} If called on an empty array without an initial value.\n * @returns {*} The value that results from the reduction.\n */\nconst $reduce = isWorking ? patchedReduce : implementation;\n\nexport default $reduce;\n"]}